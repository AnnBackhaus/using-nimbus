I"Å*<h2 id="the-steps-to-launch-an-instance">The steps to launch an instance</h2>

<p>This lesson will step you through the process of launching an instance (virtual machine or VM) on Nimbus.  You will be making decisions on the specifications of your instance and finally using a terminal to log on to your instance.  When you are doing this for the first time it can seem like a lot of information to take in before you can start an instance. As you become more familiar with this process it will become less intimidating.</p>

<p>It is easy to forget a step or misconfigure required elements.  The result may be errors on starting the instance, or you may be unable to connect once the instance is up and running.  If this happens, don‚Äôt worry (we‚Äôve all made the same mistakes when we were getting started).  If you‚Äôre working through this lesson with an instructor, they can come and advise you on where you might have gone wrong.  Whether you are working through this in a class, or by yourself, we find that (usually) the easiest fix is to delete the instance and make a new one, paying close attention to each step.</p>

<h3 id="ok-lets-get-started">OK, let‚Äôs get started‚Ä¶</h3>

<p>From the left hand menu select <strong>Compute</strong> then <strong>Instances</strong>.  Click on the <strong>Launch Instance</strong> button.</p>

<p><img src="../fig/Create_instance_button.png" alt="Launch Details" /></p>

<h2 id="1-set-a-name">1. Set a name</h2>

<p>The first step is to give your instance a name.  It doesn‚Äôt matter what you call it; usually we recommend giving your instance a name related to the task it will be performing.</p>

<p><img src="../fig/Launch_details.png" alt="Launch Details" /></p>

<h2 id="2-choose-a-source-image">2. Choose a source image</h2>

<p>The selection of the Source Image defines the operating system that will be used to launch your instance.  We include some images directly from upstream providers, as well as curating some of our own (marked with Pawsey in the name).</p>

<p>Make sure that Boot Source is set to <strong>Image</strong>, and <strong>Delete Volume on Instance Delete</strong> should set to No.</p>

<blockquote class="callout">
  <h2 id="delete-volume-on-instance-delete">Delete Volume on Instance Delete?</h2>

  <p>We suggest that you set this to No.  This does mean that if you delete your instance, its root volume will stay behind and will continue to use up your quota until you delete it.  On the other hand, it means you can recreate your instance without losing its configuration.</p>

</blockquote>

<p>For training purposes you will launch an instance using the latest Pawsey curated Ubuntu image, named something like <strong>Ubuntu 18.04 - 2019-09 - Pawsey</strong>.  Click the up-arrow to the right of the image name so that it is listed under <strong>allocated</strong>.</p>

<p>Note that there are other images you can select, and you can create your own custom images for certain purposes.</p>

<p>If you need a specific flavour of Linux and you find that it is not listed you do have another option; it is possible to import external images, but our support for you in this instance will be very limited.  It is also possible to take one of the existing images or an external image and modify it before creating an instance from that custom iamge.</p>

<p><img src="../fig/Launch_source.png" alt="Launch Source" /></p>

<h2 id="3-select-a-flavour">3. Select a flavour</h2>

<p>A ‚Äòflavour‚Äô (or ‚Äòflavor‚Äô because our software prefers US spelling) defines the characteristics of an instance.  We provide a range of flavours that vary based on the number of cores available to your instance.</p>

<p>If you‚Äôre at a training event, then select <strong>m2.small</strong>.  If you‚Äôre self-learning, choose any flavour that you wish.</p>

<p><img src="../fig/Launch_flavor.png" alt="Launch Flavor" /></p>

<h2 id="4-select-a-network">4. Select a network</h2>

<p>The <strong>Networks</strong> tab is where you will define the networking available to your instance.</p>

<p>Nimbus projects have networking prepared for you.  Using a training project you will select the network named something like <strong>cou050-network</strong>.  If you are using your own project you will see a network name similar to this.</p>

<p>You will also see a <strong>Public external</strong> network.  Cloud admins have recently changed it so you can use this and get a public IP address automatically.  As a user, you can use either method to get a public IP to SSH into.</p>

<p><img src="../fig/Launch_networks.png" alt="Launch Networks" /></p>

<h2 id="5-check-security-groups-include-previously-created-ssh-access">5. Check security groups (include previously created SSH access)</h2>
<h4 id="include-the-default-security-group">Include the <strong>default</strong> security group</h4>
<p>The security group called <strong>default</strong> is selected already, and you should leave it like that.  It allows outgoing connections from your instance, and communication between your instances if you need more than one.</p>

<p>Nimbus projects are preconfigured with a security group to permit incoming SSH access.  This is required by most users.  The security group to add is named something like __cou050-SSH __.</p>

<p><img src="../fig/Launch_security_groups.png" alt="Launch Security Groups" /></p>

<h2 id="6-click-on-launch-instance">6. Click on <strong>Launch Instance</strong></h2>

<h2 id="lets-go">Let‚Äôs go!</h2>

<p>When you click <strong>Launch Instance</strong> you should see a new instance show up in your list (probably the only item you see listed).  You will see it change state as it starts up.</p>

<p><img src="../fig/Launch_instance_click.png" alt="Launch Instance Post Click" /></p>

<p>When complete, your entry should look like this:</p>

<p><img src="../fig/Launch_instance_click2.png" alt="Launch Instance Done" /></p>

<h2 id="what-if-something-went-wrong">What if something went wrong?</h2>

<blockquote class="checklist">
  <h2 id="what-did-we-do">What did we do?</h2>

  <ul>
    <li>Selected an image and flavour</li>
    <li>Selected a network</li>
    <li>Selected a SSH security group</li>
  </ul>

</blockquote>

<p>What can go wrong?</p>
<ul>
  <li>If your instance does not start and gives an error message:  You might have selected the wrong network.</li>
</ul>

<h2 id="now-lets-give-the-instance-an-ip-address">Now let‚Äôs give the instance an IP address</h2>
<p>An IP address is a unique number that identify your instance and allows you to connect to it from anywhere on the internet.  We need to select one to use in the instance, only once this is done can we actually login to an instance.</p>

<p>Go your instance listed in the Instances view.  If you open the menu on the right side of the instance entry you will see</p>

<p><img src="../fig/Instance_actions.png" alt="Instance Actions" /></p>

<p>If you click <strong>Associate Floating IP</strong> you will see this:</p>

<p><img src="../fig/Manage_Floating_IP.png" alt="Launch Manage IP" /></p>

<p>Click the <strong>+</strong> button and you will see the <strong>Allocate Floating IP</strong> view, here you should click <strong>Allocate IP</strong> and you will now have an IP address you can use.</p>

<p><img src="../fig/Associate_floating_IP_successful.png" alt="Launch Post IP" /></p>

<h2 id="managing-your-instance">Managing your instance</h2>

<p>Let‚Äôs have another look at that instance menu, because there‚Äôs a lot there.  This is where you will perform management activities for your instance.</p>

<p><img src="../fig/Instance_actions.png" alt="Instance Actions" /></p>

<h2 id="lets-log-in">Let‚Äôs log in</h2>
<p>Now, back to your terminal window to login to your instance:</p>
<ul>
  <li>We will access our instances using a Secure SHell (SSH) connection.</li>
</ul>

<p>What you need:</p>
<ol>
  <li>
    <p><strong>Your instance‚Äôs IP address</strong>: get this from the instance overview in your dashboard
 ###.###.###.###</p>
  </li>
  <li>
    <p><strong>Your login name</strong>: this depends on the name of the Linux OS image you selected
 Login names:</p>

    <table>
      <tbody>
        <tr>
          <td>Ubuntu</td>
          <td><strong>ubuntu</strong></td>
        </tr>
        <tr>
          <td>Centos</td>
          <td><strong>centos</strong></td>
        </tr>
        <tr>
          <td>Fedora</td>
          <td><strong>fedora</strong></td>
        </tr>
        <tr>
          <td>Scientific Linux</td>
          <td><strong>root</strong></td>
        </tr>
        <tr>
          <td>Debian</td>
          <td><strong>debian</strong></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>The location and name of your private key pair (if you are using Windows and Putty)
 My_Key_Pair.ppk</p>
  </li>
</ol>

<blockquote class="callout">
  <h2 id="if-youre-using-linux--mac--unix">If you‚Äôre using Linux / Mac / Unix</h2>

  <p>$ ssh login_name@###.###.###.###</p>

  <p>or (if you have more than one private key)</p>

  <p>$ ssh ‚Äìi ~/.ssh/My_Key_Pair.pem login_name@###.###.###.###</p>
</blockquote>

<blockquote class="callout">
  <h2 id="if-youre-using-windows">If you‚Äôre using Windows</h2>

  <p>1) Open Putty</p>

  <p>2) Under ‚ÄúHost name (or IP address)‚Äù put: login_name@###.###.###.###</p>

  <p>3) In the menu on the left, expand ‚ÄúSSH‚Äù and click on ‚ÄúAuth‚Äù.</p>

  <p>4) Under the section ‚ÄúAuthentication parameters‚Äù click on ‚ÄúBrowse‚Ä¶‚Äù.</p>

  <p>5) Select your previously create .ppk private key.</p>

  <p>6) Click on ‚ÄúOpen‚Äù to start the connection to your instance.</p>
</blockquote>

<h2 id="if-it-all-worked">If it all worked‚Ä¶</h2>

<p><img src="../fig/nimbus_logged_in.png" alt="Successful login" /></p>

<h2 id="if-you-get-an-error">If you get an error‚Ä¶</h2>

<p>1) ssh: Could not resolve hostname \342\200\223i name or service unknown error - <a href="http://tumblr.gudge.com/post/18186353550/ssh-could-not-resolve-hostname-342200223i">link</a></p>

<p>When using MobaXTerm if you cut and paste the <em>ssh ‚Äìi ~/.ssh/My_Key_Pair.pem login_name@###.###.###.###</em> example you will get the wrong hyphen in the ‚Äú-i‚Äù part and throw a confusing error</p>

<p><strong>Solution:</strong> Don‚Äôt cut and paste example - manually type in ssh syntax</p>

<hr />

<p>2) Asks for passphrase when no passphrase was created.</p>

<p>When creating a private keypair from Nimbus interface, it copies it to a clipboard, which you then have to save to your computer.  You need to ensure no extra characters are added and ‚Äî‚ÄìBEGIN RSA PRIVATE KEY‚Äî‚Äì and ‚Äî‚ÄìEND RSA PRIVATE KEY‚Äî‚Äì present</p>

<p><strong>Solution:</strong> Use nano, vi directly or other non-Windows text editor, should be something like below</p>

<p><img src="../fig/example private key.png" alt="example private key" /></p>
:ET