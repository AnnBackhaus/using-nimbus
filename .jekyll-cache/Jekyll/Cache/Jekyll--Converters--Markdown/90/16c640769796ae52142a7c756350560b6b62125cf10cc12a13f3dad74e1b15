I"2<h3 id="two-types-of-built-in-storage">Two types of built-in storage</h3>
<ol>
  <li>Root Volume - includes your home directory, and storage for the operating system of your virtual machine</li>
  <li>Data Volume - a second hard drive you can add to your instance for working storage</li>
</ol>

<p>Volumes are created and attached using the Nimbus web interface, then formatted and mounted.</p>

<h2 id="create-a-volume">Create a volume</h2>
<p>Go to <strong>Volumes</strong> then <strong>Volumes</strong>.  Click on <strong>Create Volume</strong>.  A pop-up will appear (see screenshot below).</p>

<p><img src="../fig/Nimbus_volumes.png" alt="Nimbus Volumes" /></p>

<p>Enter a <strong>Volume Name</strong> and <strong>Size (GiB)</strong> for the volume, then click <strong>Create Volume</strong> at the bottom of the pop-up.</p>

<p><img src="../fig/nimbus_create_volume.png" alt="Nimbus Create Volumes" /></p>

<h2 id="manage-attachements">Manage attachements</h2>
<p><img src="../fig/Nimbus_configure_volumes.png" alt="Nimbus Configure Volumes" /></p>

<p>Select <strong>Manage Attachments</strong> from the drop-down menu of the volume you just created</p>

<p><img src="../fig/nimbus_vol_manage_attachments.png" alt="Nimbus Manage Attachments" /></p>

<p>We can check that the volume is attached, but we can’t use it just yet.  If the unformatted volume is properly attached you should see:</p>

<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@test-instance:~# sudo fdisk -l /dev/vdc
Disk /dev/vdc: 20 GiB, 21474836480 bytes, 41943040 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
</code></pre></div></div>

<h2 id="format-and-mount-a-filesystem">Format and mount a filesystem</h2>

<p>We need to format and create a filesystem on the volume.  We will do this using the mkfs command.  <strong>Warning: Use mkfs only once for each volume.  It wipes any data already on it.</strong></p>

<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@test-instance:~# sudo mkfs.ext4 /dev/vdc
mke2fs 1.42.13 (17-May-2015)
Creating filesystem with 5242880 4k blocks and 1310720 inodes
Filesystem UUID: 4523e176-043a-4d3f-b4a9-0c74ac9a4562
Superblock backups stored on blocks:
        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,
        4096000
 
Allocating group tables: done
Writing inode tables: done
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done
</code></pre></div></div>

<p>Then we can mount the volume, and create a subdirectory to store files in:</p>

<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test-instance:~$ sudo mkdir /data
test-instance:~$ sudo mount /dev/vdc /data
test-instance:~$ df -h | grep vdc
/dev/vdc         20G   44M   19G   1% /data
test-instance:~$ sudo mkdir /data/my_files
test-instance:~$ sudo chown ubuntu /data/my_files
</code></pre></div></div>

<p>You can now store files and subdirectories in the /data/my_files/ directory.</p>

<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test-instance:~$ nano /data/my_files/my-data-file
# type some made up data into the file, save and quit (^X)
test-instance:~$ ls /data/my_files/
my-data-file
</code></pre></div></div>

<h2 id="unmount-and-reuse-the-volume">Unmount and reuse the volume</h2>

<p>Once you have stored some data in your volume, you may wish to <strong>unmount</strong> it <strong>detach</strong> it from your instance.</p>

<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test-instance:~$ sudo umount /data/my_files
</code></pre></div></div>

<p>Next, select <strong>Manage Attachments</strong> from the drop-down menu of the volume, then <strong>Detach Volume</strong>, and again to confirm.  Warning: If you detach a volume before you unmount it, you may lose data.</p>

<p>Now you could delete your instance and recreate it, then attach this data volume to the new one. For now, we will just reattach it to the same instance.  Click <strong>Manage Attachments</strong> again, select your instance, and <strong>Attach Volume</strong>.</p>

<p>This time, let’s mount the volume somewhere different. Remember, you do <strong>not</strong> need to create a filesystem again, because that would wipe your data.</p>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test-instance:~$ sudo mkdir /data2
test-instance:~$ sudo mount /dev/vdc /data2
test-instance:~$ df -h | grep vdc
/dev/vdc         20G   44M   19G   1% /data2
test-instance:~$ ls /data2/
my_files
test-instance:~$ ls /data2/my_files/
my-data-file
</code></pre></div></div>
:ET